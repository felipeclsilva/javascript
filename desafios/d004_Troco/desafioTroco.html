<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculando o Troco</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        div#botao {
            background-image: linear-gradient(to bottom, #E8E8E8, #F5F5F5);
            display: inline-block;
            padding: 20px;
            border: solid 1px rgba(0, 0, 0, 0.501);
        }
    </style>
</head>
<body>
    <h1>Calculando o Troco</h1>
    <div id="botao" onclick="buyProd()">Comprar produto</div>

    <script>
        function buyProd() {
            let nomeProd = window.prompt('Que produto você está comprando?')

            // Condição 1
            if (nomeProd.length == 0) {
                window.alert('Por favor, insira o nome do produto.')
            } else {
                let preco = window.prompt(`Quanto custa o(a) ${nomeProd} que você está comprando?`)
                let precoNum = Number(preco)

                // Condição 2
                if (!Number.isFinite(precoNum) || typeof precoNum !== 'number' || Number.isNaN(precoNum) || preco.trim() == '' || !(precoNum > 0)) {
                    window.alert('Por favor, insira um número válido')
                } else {
                    let valorPago = window.prompt(`Qual foi o valor que você deu para pagar o(a) ${nomeProd}?`)
                    let valorPagoNum = Number(valorPago)

                    // Condição 3
                    if (!Number.isFinite(valorPagoNum) || typeof valorPagoNum !== 'number' || Number.isNaN(valorPagoNum) || valorPago.trim() == '' || !(valorPagoNum > 0)) {
                        window.alert('Por favor, insira um número válido')
                    } else {

                        // Condição 4
                        if (valorPagoNum >= precoNum) {
                        let diferenca = valorPagoNum - precoNum

                        window.alert(`Você comprou ${nomeProd} que custou R$ ${precoNum.toFixed(2).replace('.', ',')}.\nDeu R$ ${valorPagoNum.toFixed(2).replace('.', ',')} em dinheiro e vai receber R$ ${diferenca.toFixed(2).replace('.', ',')} de troco.\nVolte Sempre!`)
                        } else {
                            let diferenca = precoNum - valorPagoNum

                            window.alert(`Saldo insuficiente!\nVocê quer comprar ${nomeProd} que custa R$ ${precoNum.toFixed(2).replace('.', ',')}.\nDeu R$ ${valorPagoNum.toFixed(2).replace('.', ',')} em dinheiro, mas está faltando uma diferença de\nR$ ${diferenca.toFixed(2).replace('.', ',')}.\n`)
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>